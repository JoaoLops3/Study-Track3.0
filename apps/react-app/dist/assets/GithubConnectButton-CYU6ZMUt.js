import{a as h,r as g,j as s,n as f,s as i,o as n}from"./index-DR7js-zR.js";import{L as y}from"./log-in-BhZXXhRl.js";const C=({variant:c="primary",onSuccess:e,onError:r})=>{const{settings:d,updateSettings:m}=h(),[a,o]=g.useState(!1),p=async()=>{try{o(!0);const{data:t,error:l}=await i.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/github`,scopes:"repo user",queryParams:{access_type:"offline",prompt:"consent"}}});if(l)throw l;t.url&&(window.location.href=t.url),e==null||e()}catch(t){console.error("Erro ao conectar com GitHub:",t),n.error("Erro ao conectar com GitHub"),r==null||r()}finally{o(!1)}},b=async()=>{try{o(!0),await m({integrations:{...d.integrations,github:!1}});const{error:t}=await i.auth.updateUser({data:{github_token:null,github_user:null}});if(await i.auth.refreshSession(),t)throw t;n.success("Conta do GitHub desconectada com sucesso"),e==null||e()}catch(t){console.error("Erro ao desconectar GitHub:",t),n.error("Erro ao desconectar GitHub"),r==null||r()}finally{o(!1)}},u={primary:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",secondary:"px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 bg-primary-100 text-primary-700 hover:bg-primary-200 dark:bg-primary-900/30 dark:text-primary-400 dark:hover:bg-primary-900/50"};return d.integrations.github?s.jsxs("button",{onClick:b,disabled:a,className:u[c],children:[s.jsx(f,{className:"w-5 h-5 mr-2"}),a?"Desconectando...":"Desconectar GitHub"]}):s.jsxs("button",{onClick:p,disabled:a,className:u[c],children:[s.jsx(y,{className:"w-5 h-5 mr-2"}),a?"Conectando...":"Conectar GitHub"]})};export{C as G};
//# sourceMappingURL=GithubConnectButton-CYU6ZMUt.js.map
