import{j as i}from"./ui-BN-0vsY4.js";import{r as b}from"./vendor-1oV-3_XS.js";import{c as g,a as y,f,s,e as n}from"./index-Kc8VGIUG.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=g("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),G=({variant:c="primary",onSuccess:e,onError:r})=>{const{settings:d,updateSettings:m}=y(),[a,o]=b.useState(!1),p=async()=>{try{o(!0);const{data:t,error:l}=await s.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/github`,scopes:"repo user",queryParams:{access_type:"offline",prompt:"consent"}}});if(l)throw l;t.url&&(window.location.href=t.url),e==null||e()}catch(t){console.error("Erro ao conectar com GitHub:",t),n.error("Erro ao conectar com GitHub"),r==null||r()}finally{o(!1)}},h=async()=>{try{o(!0),await m({integrations:{...d.integrations,github:!1}});const{error:t}=await s.auth.updateUser({data:{github_token:null,github_user:null}});if(await s.auth.refreshSession(),t)throw t;n.success("Conta do GitHub desconectada com sucesso"),e==null||e()}catch(t){console.error("Erro ao desconectar GitHub:",t),n.error("Erro ao desconectar GitHub"),r==null||r()}finally{o(!1)}},u={primary:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",secondary:"px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 bg-primary-100 text-primary-700 hover:bg-primary-200 dark:bg-primary-900/30 dark:text-primary-400 dark:hover:bg-primary-900/50"};return d.integrations.github?i.jsxs("button",{onClick:h,disabled:a,className:u[c],children:[i.jsx(f,{className:"w-5 h-5 mr-2"}),a?"Desconectando...":"Desconectar GitHub"]}):i.jsxs("button",{onClick:p,disabled:a,className:u[c],children:[i.jsx(x,{className:"w-5 h-5 mr-2"}),a?"Conectando...":"Conectar GitHub"]})};export{G};
